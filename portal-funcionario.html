<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Funcion√°rio - Javis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core/locales/pt-br.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/imask"></script>
    <script src="https://cdn.tiny.cloud/1/d7b2b786b254ig6qblufwnifovbaziiwmevlpi9dknzz6ip4/tinymce/8/tinymce.min.js" referrerpolicy="origin" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style-funcionario.css">
</head>
<body class="flex h-screen overflow-hidden text-sm bg-[#0f0f0f]">

    <div id="sidebarOverlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/70 z-40 hidden md:hidden backdrop-blur-sm transition-opacity"></div>

    <aside id="sidebar" class="w-64 bg-[#111] border-r border-[#333] flex flex-col fixed inset-y-0 left-0 z-50 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 ease-in-out shadow-2xl md:shadow-none">
        <div class="p-6 flex justify-between items-start">
            <div>
                <img src="assets/img/JAVIS - LOGO COM REGISTRO (BRANCO) (2).webp" alt="Logo" class="w-32 mx-auto md:w-40">
                <p class="text-center text-xs text-gray-500 mt-2" id="label-cargo">CARREGANDO...</p>
            </div>
            <button onclick="toggleSidebar()" class="md:hidden text-gray-400 hover:text-white">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <nav class="flex-1 space-y-1 px-3 py-4 overflow-y-auto" id="menu-lateral">
            <a href="#" onclick="showTab('dashboard')" id="menu-dashboard" class="sidebar-item active flex items-center px-4 py-3 rounded-md text-gray-400"><i class="fas fa-chart-pie w-6 mr-3"></i> Dashboard</a>
            <a href="#" onclick="showTab('inscricoes')" id="menu-inscricoes" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400"><i class="fas fa-clipboard-list w-6 mr-3"></i> Leads Workshops</a>
            <a href="#" onclick="showTab('alunos')" id="menu-alunos" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400"><i class="fas fa-users w-6 mr-3"></i> Meus Alunos</a>
            <a href="#" onclick="showTab('conteudo-didatico')" id="menu-conteudo-didatico" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400 hover:bg-white/5 transition">
                <i class="fas fa-book-open w-6 mr-3"></i> Conte√∫do Aulas
            </a>
            <a href="#" onclick="showTab('agenda')" id="menu-agenda" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400"><i class="fas fa-calendar-alt w-6 mr-3"></i> Agenda</a>
            <a href="#" onclick="showTab('atendimento')" id="menu-atendimento" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400"><i class="fas fa-comments w-6 mr-3"></i> Chat & Grupos</a>
            <a href="#" onclick="showTab('equipe')" id="menu-equipe" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400">
                <i class="fas fa-id-badge w-6 mr-3"></i> Gest√£o de Equipe
            </a>
            
            <div class="pt-4 mt-4 border-t border-[#222]">
                <p class="px-4 text-xs text-gray-600 uppercase font-bold mb-2">A√ß√µes</p>
                <a href="#" onclick="showTab('turmas')" id="menu-turmas" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400">
                    <i class="fas fa-layer-group w-6 mr-3"></i> Gest√£o de Turmas
                </a>
                <a href="#" onclick="showTab('cadastro')" id="menu-cadastro" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400"><i class="fas fa-user-plus w-6 mr-3"></i> Novo Aluno</a>
                <a href="#"
                    onclick="showTab('novo-usuario')"
                    id="menu-novo-usuario"
                    class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400">
                    <i class="fas fa-user-lock w-6 mr-3"></i> Novo Usu√°rio
                </a>
                <a href="#" onclick="showTab('reposicao')" id="menu-reposicao" class="sidebar-item flex items-center px-4 py-3 rounded-md text-gray-400"><i class="fas fa-clock w-6 mr-3"></i> Reposi√ß√µes</a>
            </div>
        </nav>
        
        <div class="p-4 border-t border-[#222] bg-[#0c0c0c]">
            <a href="#" id="menu-perfil" onclick="showTab('perfil')" class="sidebar-item flex items-center gap-3 mb-3 cursor-pointer hover:bg-white/5 p-2 rounded transition-colors no-underline">
                <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-[#00FFFF] shrink-0">
                    <i class="fas fa-user"></i>
                </div>
                <div class="overflow-hidden text-left w-full">
                    <p class="text-white text-xs font-bold truncate" id="nome-usuario-logado">Usu√°rio</p>
                    <p class="text-gray-500 text-[10px] truncate" id="email-usuario-logado">Cargo</p>
                </div>
            </a>

            <button onclick="logout()" class="w-full flex items-center justify-center px-4 py-2 text-xs text-red-400 bg-red-900/10 hover:bg-red-900/30 border border-red-900/30 rounded transition">
                <i class="fas fa-sign-out-alt mr-2"></i> Sair
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col overflow-hidden relative" id="mainContainer">
        
        <div class="md:hidden bg-[#111] border-b border-[#333] p-4 flex justify-between items-center sticky top-0 z-30 shadow-md">
            <img src="assets/img/JAVIS - LOGO COM REGISTRO (BRANCO) (2).webp" alt="Logo" class="h-8">
            <button onclick="toggleSidebar()" class="text-[#00FFFF] text-2xl focus:outline-none p-2 active:bg-gray-800 rounded">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div class="flex-1 overflow-y-auto bg-[#0f0f0f] relative" id="mainContent">

            <div id="dashboard" class="tab-content p-4 md:p-8 fade-in">
                <h1 class="text-2xl md:text-3xl font-bold text-white mb-6">Vis√£o Geral</h1>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-[#222] p-4 rounded-lg border border-[#333] relative overflow-hidden group hover:border-[#00FFFF] transition">
                        <div class="absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition"><i class="fas fa-user-graduate text-6xl text-white"></i></div>
                        <h3 class="text-gray-400 text-xs uppercase font-bold">Total Alunos</h3><p class="text-2xl md:text-3xl font-bold text-white mt-1" id="dash-total-alunos">...</p>
                    </div>
                    <div class="bg-[#222] p-4 rounded-lg border border-[#333] relative overflow-hidden group hover:border-[#00FFFF] transition">
                        <div class="absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition"><i class="fas fa-chalkboard text-6xl text-white"></i></div>
                        <h3 class="text-gray-400 text-xs uppercase font-bold">Turmas Ativas</h3><p class="text-2xl md:text-3xl font-bold text-[#00FFFF] mt-1" id="dash-turmas-ativas">...</p>
                    </div>
                    <div class="bg-[#222] p-4 rounded-lg border border-[#333] relative overflow-hidden group hover:border-[#00FFFF] transition">
                        <div class="absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition"><i class="fas fa-bullseye text-6xl text-white"></i></div>
                        <h3 class="text-gray-400 text-xs uppercase font-bold">Taxa Convers√£o</h3><p class="text-2xl md:text-3xl font-bold text-green-400 mt-1"><span id="dash-conversao">...</span><span class="text-sm">%</span></p>
                    </div>
                    <div class="bg-[#222] p-4 rounded-lg border border-[#333] relative overflow-hidden group hover:border-[#00FFFF] transition">
                        <div class="absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition"><i class="fas fa-clock text-6xl text-white"></i></div>
                        <h3 class="text-gray-400 text-xs uppercase font-bold">Reposi√ß√µes Pend.</h3><p class="text-2xl md:text-3xl font-bold text-yellow-400 mt-1" id="dash-reposicoes">...</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-[#222] p-6 rounded-lg border border-[#333]">
                        <h3 class="text-white font-bold mb-4 flex items-center"><i class="fas fa-filter text-[#00FFFF] mr-2"></i> Funil de Leads</h3>
                        <div class="h-64 relative"><canvas id="graficoLeads"></canvas></div>
                        <div class="mt-4 grid grid-cols-3 gap-2 text-center text-xs">
                            <div class="bg-[#111] p-2 rounded text-red-400 border border-red-900/30"><div class="font-bold text-lg" id="d-pend">0</div>Pendentes</div>
                            <div class="bg-[#111] p-2 rounded text-yellow-400 border border-yellow-900/30"><div class="font-bold text-lg" id="d-atend">0</div>Atendendo</div>
                            <div class="bg-[#111] p-2 rounded text-green-400 border border-green-900/30"><div class="font-bold text-lg" id="d-matr">0</div>Matriculados</div>
                        </div>
                    </div>
                    <div class="bg-[#222] p-6 rounded-lg border border-[#333]">
                        <h3 class="text-white font-bold mb-4 flex items-center"><i class="fas fa-chart-bar text-[#00FFFF] mr-2"></i> Turmas por Curso</h3>
                        <div class="h-64 relative"><canvas id="graficoCursos"></canvas></div>
                    </div>
                </div>
            </div>

            <div id="conteudo-didatico" class="tab-content hidden h-full flex flex-col p-2 md:p-6 fade-in">
                <h1 class="text-xl md:text-3xl font-bold text-[#00FFFF] mb-4">Conte√∫do Did√°tico</h1>
                
                <div class="flex flex-col md:flex-row gap-4 h-[80vh] w-full">

                    <!-- Toggle button para mobile: mostra/oculta a biblioteca -->

                    <div id="bibliotecaContainer" class="w-full md:w-1/4 bg-[#222] rounded-lg border border-[#333] flex flex-col h-auto max-h-[200px] md:max-h-full md:h-full overflow-hidden shrink-0 hidden md:flex">
                        
                        <div class="p-3 border-b border-[#333] bg-[#151515] flex justify-between items-center sticky top-0 z-20">
                            <h3 class="text-white font-bold text-sm"><i class="fas fa-folder-open mr-2 text-[#00FFFF]"></i> Biblioteca</h3>
                            <button onclick="carregarConteudoDidatico()" class="text-[10px] text-[#00FFFF] hover:underline cursor-pointer" title="Recarregar"><i class="fas fa-sync"></i></button>
                        </div>
                        
                        <div id="lista-conteudo-dinamico" class="overflow-y-auto custom-scrollbar flex-1 p-2 space-y-6">
                            <p class="text-gray-500 text-center text-xs mt-4">Carregando cursos...</p>
                        </div>
                    </div>

                    <div id="visualizadorContainer" class="w-full md:w-3/4 bg-[#111] rounded-lg border border-[#333] flex flex-col relative overflow-hidden shadow-2xl flex-1 md:h-full">
                        <div class="bg-[#1a1a1a] border-b border-[#333] p-2 flex justify-between items-center shrink-0">
                            <span class="text-xs text-gray-500 uppercase font-bold tracking-wider">Visualiza√ß√£o</span>
                            <button onclick="document.getElementById('frame-aula-prof').src = 'about:blank'; document.getElementById('placeholder-aula').style.display = 'flex';" class="text-xs text-red-400 hover:text-red-300 transition"><i class="fas fa-times mr-1"></i> Fechar</button>
                        </div>
                        
                        <iframe id="frame-aula-prof" src="about:blank" class="w-full h-full border-none bg-black flex-1"></iframe>
                        
                        <div id="placeholder-aula" class="absolute inset-0 flex flex-col items-center justify-center bg-[#111] z-10">
                            <i class="fas fa-chalkboard-teacher text-4xl md:text-6xl text-[#333] mb-4"></i>
                            <p class="text-gray-500 text-xs md:text-sm text-center px-4 mt-2">Selecione uma aula no menu lateral para visualizar.</p>
                        </div>
                    </div>
                </div>
            </div>

            
            <div id="turmas" class="tab-content hidden p-4 md:p-8 fade-in">
                <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF] mb-6">Gest√£o de Turmas</h1>
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 items-start">
                    <div class="lg:col-span-4">
                        <div class="bg-[#222] p-4 md:p-6 rounded-lg border border-[#333]">
                            <h2 class="text-white font-bold mb-4 border-b border-[#333] pb-2 flex items-center">
                                <i class="fas fa-plus-circle text-[#00FFFF] mr-2"></i> <span id="tituloFormTurma">Nova Turma</span>
                            </h2>
                            <form id="formTurma" onsubmit="salvarTurma(event)" class="space-y-3">
                                <div><label class="text-xs text-gray-400">C√≥digo</label><input type="text" id="tmCodigo" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white uppercase outline-none" required></div>
                                <div><label class="text-xs text-gray-400">Curso</label><select id="tmCurso" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white outline-none"><option value="GAME PRO">GAME PRO</option><option value="DESIGNER START">DESIGNER START</option><option value="GAME DEV">GAME DEV</option><option value="YOUTUBER">YOUTUBER</option></select></div>
                                <div><label class="text-xs text-gray-400">Professor</label><select id="tmProfessor" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white outline-none"><option value="">Sem Professor</option></select></div>
                                <div class="grid grid-cols-2 gap-2"><div><label class="text-xs text-gray-400">In√≠cio</label><input type="date" id="tmDataInicio" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"></div><div><label class="text-xs text-gray-400">Qtd Aulas</label><input type="number" id="tmQtdAulas" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"></div></div>
                                <div><label class="text-xs text-gray-400">Fim Real</label><input type="date" id="tmDataFinal" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"></div>
                                <div class="grid grid-cols-2 gap-2"><div><label class="text-xs text-gray-400">Dia</label><select id="tmDia" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"><option>Segunda</option><option>Ter√ßa</option><option>Quarta</option><option>Quinta</option><option>Sexta</option><option>S√°bado</option></select></div><div><label class="text-xs text-gray-400">Hor√°rio</label><input type="text" id="tmHorario" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"></div></div>
                                <div class="grid grid-cols-2 gap-2">
                                    <div><label class="text-xs text-gray-400">Sala</label><input type="text" id="tmSala" value="Lab 1" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"></div>
                                    <div>
                                        <label class="text-xs text-gray-400">Status</label>
                                        <select id="tmStatus" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white">
                                            <option value="Planejada">üü° Planejada (Breve)</option>
                                            <option value="Em Andamento">üü¢ Em Andamento (Vagas)</option>
                                            <option value="Fechada">üî¥ Fechada (Lotada)</option>
                                            <option value="Conclu√≠da">‚ö´ Conclu√≠da (Finalizada)</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs text-gray-400">Tipo da Turma</label>
                                    <select id="tmTipo" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white">
                                        <option value="PARTICULAR">Particular (Padr√£o)</option>
                                        <option value="PROJETO">Projeto (SEDUC/Parceria)</option>
                                    </select>
                                </div>
                                <div class="flex gap-2 mt-4"><button type="submit" id="btnSalvarTurma" class="flex-1 bg-[#00FFFF] text-black font-bold py-2 rounded hover:bg-[#00cccc]">SALVAR</button><button type="button" onclick="limparFormTurma()" class="px-3 bg-[#333] text-white rounded hover:bg-[#444]"><i class="fas fa-eraser"></i></button></div>
                            </form>
                        </div>
                    </div>

                    <div class="lg:col-span-8">
                        <div class="bg-[#222] rounded-lg overflow-hidden border border-[#333] h-full flex flex-col">
                            <div class="p-3 bg-[#151515] border-b border-[#333] flex justify-between items-center">
                                <h3 class="text-gray-300 font-bold">Turmas</h3>
                                <div class="flex items-center gap-3">
                                    <div class="relative w-48">
                                        <i class="fas fa-search absolute left-3 top-2 text-gray-500 text-[10px]"></i>
                                        <input type="text" id="input-busca-turmas" oninput="filtrarTabelaGeneric('input-busca-turmas', 'listaTurmasBody')" placeholder="Filtrar turmas..." 
                                            class="w-full bg-[#0f0f0f] border border-[#333] rounded-full py-1 pl-8 pr-3 text-[10px] text-white outline-none focus:border-[#00FFFF]">
                                    </div>
                                    <button onclick="carregarListaTurmas()" class="text-[#00FFFF] hover:scale-110 transition"><i class="fas fa-sync"></i></button>
                                </div>
                            </div>
                            <div class="overflow-x-auto"> 
                                <table class="w-full text-left min-w-[600px]">
                                    <thead class="bg-[#111] text-[#00FFFF] text-xs">
                                        <tr><th class="p-3">C√≥digo</th><th class="p-3">Curso</th><th class="p-3">Datas</th><th class="p-3">Status</th><th class="p-3">A√ß√£o</th></tr>
                                    </thead>
                                    <tbody id="listaTurmasBody" class="text-gray-300 text-xs">
                                        <tr><td colspan="5" class="p-4 text-center">...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="inscricoes" class="tab-content hidden p-4 md:p-8 fade-in">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF]">Leads (CRM)</h1>
                    <div class="flex flex-wrap items-center gap-2">
                        <div class="relative w-full md:w-64">
                            <i class="fas fa-search absolute left-3 top-2.5 text-gray-500 text-xs"></i>
                            <input type="text" id="input-busca-leads" oninput="filtrarTabelaGeneric('input-busca-leads', 'listaInscricoesBody')" placeholder="Buscar lead..." 
                                class="w-full bg-[#1a1a1a] border border-[#333] rounded-full py-2 pl-9 pr-4 text-xs text-white outline-none focus:border-[#00FFFF] transition">
                        </div>
                        <select id="filtroCidadeLeads" onchange="carregarInscricoes()" class="hidden bg-[#1a1a1a] border border-[#444] rounded p-2 text-white text-xs outline-none">
                            <option value="">üåé Todas as Unidades</option>
                            <option value="1">üìç Cuiab√°</option>
                            <option value="2">üìç Teresina</option>
                        </select>
                        <button onclick="carregarInscricoes()" class="bg-[#222] text-white px-3 py-2 text-xs md:text-sm rounded border border-[#444] hover:bg-[#333]">
                            <i class="fas fa-sync mr-1"></i> Atualizar
                        </button>
                    </div>
                </div>
                <div class="bg-[#222] rounded-lg overflow-hidden border border-[#333]">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left min-w-[800px]">
                            <thead class="bg-[#111] text-[#00FFFF] uppercase text-xs"><tr><th class="p-4">Tipo</th><th class="p-4">Lead / CPF</th><th class="p-4">Interesse</th><th class="p-4">Status / Vendedor</th><th class="p-4">A√ß√£o</th></tr></thead>
                            <tbody id="listaInscricoesBody" class="text-gray-300 text-sm"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="alunos" class="tab-content hidden p-4 md:p-8">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF]">Lista de Alunos</h1>
                    <div class="relative w-full md:w-64">
                        <i class="fas fa-search absolute left-3 top-2.5 text-gray-500 text-xs"></i>
                        <input type="text" id="input-busca-alunos" oninput="filtrarTabelaGeneric('input-busca-alunos', 'listaAlunosBody')" placeholder="Buscar aluno..." 
                            class="w-full bg-[#1a1a1a] border border-[#333] rounded-full py-2 pl-9 pr-4 text-xs text-white outline-none focus:border-[#00FFFF] transition">
                    </div>
                </div>
                <div class="bg-[#222] rounded-lg overflow-hidden border border-[#333]">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left min-w-[900px]">
                            <thead class="bg-[#111] text-[#00FFFF]">
                                <tr>
                                    <th class="p-4">Nome</th>
                                    <th class="p-4">CPF</th>
                                    <th class="p-4">Celular</th>
                                    <th class="p-4">Telefone</th>
                                    <th class="p-4">Turma</th>
                                    <th class="p-4">Dia</th> <th class="p-4">Tipo</th> 
                                    <th class="p-4">Status</th>
                                    <th class="p-4">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="listaAlunosBody" class="text-gray-300"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="cadastro" class="tab-content hidden p-4 md:p-8 fade-in">
                <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF] mb-6">Cadastrar Aluno</h1>
                <div class="bg-[#222] p-6 rounded-lg border border-[#333] max-w-4xl"> 
                    <form id="formCadastroAluno" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label class="text-gray-400 text-sm">Nome *</label><input type="text" id="cadNome" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white uppercase" required></div>
                            <div><label class="text-gray-400 text-sm">Email (Login) *</label><input type="email" id="cadEmail" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white" required></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label class="text-gray-400 text-sm">CPF *</label><input type="text" id="cadCpf" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white" required></div>
                            <div><label class="text-gray-400 text-sm">Nascimento</label><input type="date" id="cadNascimento" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label class="text-gray-400 text-sm">Celular *</label><input type="text" id="cadCelular" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white" required></div>
                            <div><label class="text-gray-400 text-sm">Telefone</label><input type="text" id="cadTelefone" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"></div>
                        </div>
                        <hr class="border-[#333] my-2">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div><label class="text-gray-400 text-sm">Senha Inicial *</label><input type="text" id="cadSenha" value="mudar123" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white" required></div>
                            <div><label class="text-gray-400 text-sm">Turma *</label><select id="cadTurma" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"><option value="" disabled selected>Carregando...</option></select></div>
                        </div>
                        <button type="submit" class="w-full bg-[#00FFFF] text-black font-bold py-3 rounded hover:bg-[#00cccc] mt-4">CADASTRAR ALUNO</button>
                    </form>
                </div>
            </div>

            <div id="novo-usuario" class="tab-content hidden p-4 md:p-8 fade-in">
                <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF] mb-6">Novo Usu√°rio (Login)</h1>

                <div class="bg-black/30 border border-[#222] rounded-xl p-6">
                    <form id="formNovoUsuario" class="space-y-4">

                    <div>
                        <label class="block text-gray-300 font-semibold mb-1">Selecionar Aluno</label>
                        <select id="novoUsuarioAluno" class="w-full bg-[#111] border border-[#333] rounded px-3 py-2 text-white" required>
                        <option value="" disabled selected>Selecione um aluno...</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-300 font-semibold mb-1">E-mail (Login)</label>
                        <input id="novoUsuarioEmail" type="email"
                            class="w-full bg-[#111] border border-[#333] rounded px-3 py-2 text-white"
                            placeholder="email@dominio.com" required />
                    </div>

                    <div>
                        <label class="block text-gray-300 font-semibold mb-1">Senha</label>
                        <input id="novoUsuarioSenha" type="password"
                            class="w-full bg-[#111] border border-[#333] rounded px-3 py-2 text-white"
                            placeholder="Senha inicial" required />
                    </div>

                    <button id="btnCriarNovoUsuario" type="submit"
                            class="w-full bg-[#00FFFF] text-black font-bold py-3 rounded hover:bg-[#00cccc] mt-4">
                        CRIAR LOGIN
                    </button>

                    </form>
                </div>
            </div>


            <div id="agenda" class="tab-content hidden p-4 md:p-8 fade-in">
                <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF] mb-6">Agenda</h1>
                <div class="bg-[#222] p-2 md:p-4 rounded-lg border border-[#333] mb-8 overflow-hidden">
                    <div id='calendar' class="text-xs md:text-sm"></div>
                </div>
                <h2 class="text-xl font-bold text-white mb-4 border-l-4 border-[#ff4d4d] pl-3">Pr√≥ximos</h2>
                <div class="bg-[#222] rounded-lg overflow-hidden border border-[#333] max-h-96 overflow-y-auto">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left min-w-[500px]">
                            <thead class="bg-[#151515] text-gray-400 sticky top-0"><tr><th class="p-4 w-40">Data / Hora</th><th class="p-4">Evento</th><th class="p-4 w-32 text-center">Tipo</th><th class="p-4 w-20">A√ß√£o</th></tr></thead>
                            <tbody id="listaAgendaBody" class="text-gray-300 text-sm divide-y divide-[#333]"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="reposicao" class="tab-content hidden p-4 md:p-8 fade-in">
                <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF] mb-6">Agendar Reposi√ß√£o</h1>
                <div class="bg-[#222] p-6 rounded-lg border border-[#333] max-w-2xl">
                    <form id="formReposicao" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="text-gray-400 text-sm">Aluno</label>
                                <select id="repIdAluno" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white outline-none" required><option value="" disabled selected>Carregando alunos...</option></select>
                            </div>
                            <div>
                                <label class="text-gray-400 text-sm">Data/Hora</label>
                                <input type="datetime-local" id="repData" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white" required>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="text-gray-400 text-sm">Turma</label>
                                <select id="repTurma" onchange="autoSelecionarProfessor()" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white"><option value="">Carregando...</option></select>
                            </div>
                            <div>
                                <label class="text-gray-400 text-sm">Professor</label>
                                <select id="repProfessor" class="w-full bg-[#151515] border border-[#333] rounded p-2 text-gray-300 pointer-events-none"><option value="">Aguardando...</option></select>
                            </div>
                        </div>
                        <div><label class="text-gray-400 text-sm">Conte√∫do</label><input type="text" id="repConteudo" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white" required></div>
                        <button type="submit" class="w-full bg-[#ff4d4d] text-white font-bold py-3 rounded hover:bg-red-700 mt-4">AGENDAR REPOSI√á√ÉO</button>
                    </form>
                </div>
            </div>
            
            <div id="atendimento" class="tab-content hidden h-full flex flex-col p-4 md:p-8">
                <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF] mb-6">Central de Atendimento</h1>
                
                <div class="flex flex-col md:flex-row gap-6 h-[600px]">
                    <div class="w-full md:w-1/3 bg-[#222] rounded-lg border border-[#333] flex flex-col h-1/3 md:h-full">
                        <div class="flex border-b border-[#333]">
                            <div onclick="mudarAbaChat('conversas')" id="tab-conversas" class="chat-tab active" title="Hist√≥rico Recente">
                                <i class="fas fa-history text-lg"></i> Conversas
                            </div>
                            <div onclick="mudarAbaChat('alunos')" id="tab-alunos" class="chat-tab" title="Lista de Contatos">
                                <i class="fas fa-address-book text-lg"></i> Alunos
                            </div>
                            <div onclick="mudarAbaChat('grupo')" id="tab-grupo" class="chat-tab" title="Grupos das Turmas">
                                <i class="fas fa-users text-lg"></i> Grupos
                            </div>
                        </div>
                        
                        <div class="p-3 bg-[#151515] border-b border-[#333] flex justify-between items-center">
                            <h3 class="text-gray-400 text-xs font-bold uppercase" id="titulo-lista-chat">Recentes</h3>
                            <button onclick="atualizarListaChat()" class="text-[#00FFFF] hover:scale-110 transition" title="Atualizar Lista"><i class="fas fa-sync"></i></button>
                        </div>

                        <div class="p-2 bg-[#151515] border-b border-[#333]">
                            <div class="relative">
                                <i class="fas fa-search absolute left-3 top-2.5 text-gray-500 text-xs"></i>
                                <input type="text" id="input-pesquisa-chat" oninput="handleSearchInput()" placeholder="Pesquisar..." class="w-full bg-[#0f0f0f] border border-[#333] rounded-full py-1.5 pl-8 pr-3 text-xs text-white outline-none focus:border-[#00FFFF] transition placeholder-gray-600">
                            </div>
                        </div>
                        
                        <div id="lista-conversas" class="overflow-y-auto flex-1 p-2 space-y-1 custom-scrollbar">
                            </div>
                    </div>

                    <div class="w-full md:w-2/3 bg-[#222] rounded-lg border border-[#333] flex flex-col relative overflow-hidden h-2/3 md:h-full">
                        <div id="aviso-selecao" class="absolute inset-0 flex flex-col items-center justify-center text-gray-500 z-10 bg-[#222]">
                            <i class="far fa-comments text-6xl mb-4 opacity-20"></i>
                            <p class="text-sm">Selecione uma conversa para iniciar.</p>
                        </div>

                        <div id="area-chat-admin" class="flex flex-col h-full hidden z-20">
                            <div class="p-4 bg-[#1a1a1a] border-b border-[#333] flex justify-between items-center shadow-md">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-full bg-[#333] flex items-center justify-center border border-gray-600" id="chat-header-icon">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-[#00FFFF] text-base leading-tight" id="chat-admin-nome">Nome</h3>
                                        <p class="text-[10px] text-gray-400" id="chat-admin-desc">Detalhes</p>
                                    </div>
                                </div>
                            </div>

                            <div id="msgs-admin" class="flex-1 p-6 overflow-y-auto space-y-3 bg-[#161616] custom-scrollbar relative">
                                </div>

                            <div class="p-4 bg-[#222] border-t border-[#333] flex gap-3">
                                <input type="text" id="admin-input" class="flex-1 bg-[#1a1a1a] border border-[#444] rounded-lg px-4 py-3 text-white outline-none focus:border-[#00FFFF] placeholder-gray-500 transition focus:bg-[#151515]" placeholder="Digite sua mensagem..." onkeypress="if(event.key === 'Enter') enviarMensagemUnified()">
                                <button onclick="enviarMensagemUnified()" class="bg-[#00FFFF] text-black px-4 md:px-6 font-bold rounded-lg hover:bg-[#00cccc] transition shadow-[0_0_10px_rgba(0,255,255,0.2)]">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="perfil" class="tab-content hidden p-4 md:p-8 fade-in">
                <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF] mb-6">Meu Perfil</h1>
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-1/3 bg-[#222] p-6 rounded-lg border border-[#333] text-center h-fit">
                        <div class="w-24 h-24 rounded-full bg-[#333] flex items-center justify-center text-[#00FFFF] text-4xl border-2 border-[#00FFFF] mx-auto mb-4"><i class="fas fa-user-tie"></i></div>
                        <h2 class="text-xl font-bold text-white mb-1" id="perfil-card-nome">...</h2>
                        <p class="text-gray-500 text-sm mb-4" id="perfil-card-cargo">...</p>
                        <div class="text-xs text-gray-600 bg-[#151515] p-2 rounded">ID: <span id="perfil-card-id">...</span></div>
                    </div>
                    <div class="w-full md:w-2/3 bg-[#222] p-6 rounded-lg border border-[#333]">
                        <form id="formPerfil" onsubmit="salvarPerfil(event)" class="space-y-5">
                            <div><label class="text-[#00FFFF] font-bold text-sm">NOME COMPLETO</label><input type="text" id="perfNome" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-3 text-white uppercase"></div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div><label class="text-gray-400 text-sm">Telefone</label><input type="text" id="perfTel" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-3 text-white"></div>
                                <div><label class="text-gray-400 text-sm">Email Contato</label><input type="email" id="perfEmailContato" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-3 text-white"></div>
                            </div>
                            <hr class="border-[#333] my-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div><label class="text-gray-400 text-sm">Email Login</label><input type="email" id="perfEmailLogin" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-3 text-white"></div>
                                <div><label class="text-gray-400 text-sm">Nova Senha</label><input type="password" id="perfSenha" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-3 text-white" placeholder="Opcional"></div>
                            </div>
                            <div class="pt-4 flex justify-end"><button type="submit" id="btnSalvarPerfil" class="bg-[#00FFFF] text-black px-8 py-3 rounded font-bold hover:bg-[#00cccc]">SALVAR</button></div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="equipe" class="tab-content hidden p-4 md:p-8 fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl md:text-3xl font-bold text-[#00FFFF]">Gest√£o de Equipe</h1>
                    <div class="flex gap-2">
                        <button onclick="abrirModalColaborador()" class="bg-[#00FFFF] text-black px-4 py-2 rounded font-bold text-xs hover:bg-[#00cccc]">
                            <i class="fas fa-plus mr-2"></i> NOVO COLABORADOR
                        </button>
                    </div>
                </div>
                <div class="flex gap-6 flex-col lg:flex-row">
                    <div class="w-full lg:w-2/3">
                        <div class="bg-[#222] rounded-lg overflow-hidden border border-[#333] h-full flex flex-col">
                            <div class="p-3 bg-[#151515] border-b border-[#333] flex justify-between items-center">
                                <h3 class="text-gray-300 font-bold">Funcion√°rios da Unidade</h3>
                                <button onclick="carregarListaEquipe()" class="text-[#00FFFF]"><i class="fas fa-sync"></i></button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left min-w-[500px]">
                                    <thead class="bg-[#111] text-[#00FFFF] text-xs">
                                        <tr><th class="p-3">Nome</th><th class="p-3">Cargo</th><th class="p-3">Contato</th><th class="p-3">Status</th><th class="p-3">A√ß√£o</th></tr>
                                    </thead>
                                    <tbody id="listaEquipeBody" class="text-gray-300 text-xs"><tr><td colspan="4" class="p-4 text-center">Carregando...</td></tr></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <div id="modalUniversal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 md:p-6">
        <div onclick="fecharModalUniversal()" class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
        <div class="bg-[#1a1a1a] border border-[#333] w-full max-w-lg rounded-xl shadow-2xl flex flex-col max-h-[90vh] relative z-10 fade-in">
            <div class="p-5 border-b border-[#333] flex justify-between items-center bg-[#111] rounded-t-xl">
                <h3 class="text-lg font-bold text-[#00FFFF]" id="modalTitle">T√≠tulo</h3>
                <button onclick="fecharModalUniversal()" class="text-gray-400 hover:text-white transition p-2">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6 overflow-y-auto custom-scrollbar flex-1" id="modalBody"></div>
            <div class="p-5 border-t border-[#333] bg-[#111] rounded-b-xl flex gap-3" id="modalFooter">
                <button onclick="fecharModalUniversal()" class="flex-1 bg-[#333] text-white py-2.5 rounded-lg font-bold hover:bg-[#444]">CANCELAR</button>
                <button id="modalConfirmBtn" class="flex-1 bg-[#00FFFF] text-black py-2.5 rounded-lg font-bold hover:bg-[#00cccc]">SALVAR</button>
            </div>
        </div>
    </div>

    <div id="modalEditorAula" class="fixed inset-0 z-[60] hidden bg-black/90 backdrop-blur-sm flex flex-col fade-in">
        <div class="bg-[#111] border-b border-[#333] p-4 flex justify-between items-center shrink-0">
            <div>
                <h2 class="text-[#00FFFF] font-bold text-lg" id="tituloAulaEditor">Editando Aula</h2>
                <p class="text-gray-500 text-xs">As altera√ß√µes aparecem em tempo real para os alunos.</p>
            </div>
            <div class="flex gap-3">
                <button onclick="fecharEditorAula()" class="px-4 py-2 bg-[#333] hover:bg-[#444] text-white rounded font-bold transition">CANCELAR</button>
                <button onclick="salvarConteudoAula()" class="px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded font-bold transition flex items-center">
                    <i class="fas fa-save mr-2"></i> SALVAR
                </button>
            </div>
        </div>

        <div class="flex-1 bg-white overflow-hidden relative">
            <textarea id="editorTexto"></textarea>
        </div>
    </div>

    <div id="modalEditarRepo" class="fixed inset-0 bg-black/90 hidden items-center justify-center z-50 fade-in backdrop-blur-sm p-4">
        <div class="bg-[#1a1a1a] border border-[#333] w-full max-w-md rounded-xl shadow-2xl flex flex-col relative z-10">
        
            <div class="p-5 border-b border-[#333] flex justify-between items-center bg-[#111] rounded-t-xl">
                <h3 class="text-lg font-bold text-[#00FFFF]">Editar Reposi√ß√£o</h3>
                <button type="button" onclick="document.getElementById('modalEditarRepo').style.display='none'" class="text-gray-400 hover:text-white transition">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <div class="p-6">
                <form id="formEditarRepo" onsubmit="salvarEdicaoRepo(event)" class="space-y-4">
                    
                    <input type="hidden" id="editRepoId">

                    <div>
                        <label class="text-xs text-gray-500 font-bold uppercase">Aluno</label>
                        <p id="editRepoNome" class="text-white font-bold text-sm bg-[#222] p-2 rounded border border-[#333]">
                            Carregando...
                        </p>
                    </div>

                    <div>
                        <label class="text-xs text-gray-400">Nova Data/Hora</label>
                        <input type="datetime-local" id="editRepoData" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white outline-none focus:border-[#00FFFF]">
                    </div>

                    <div>
                        <label class="text-xs text-gray-400">Conte√∫do/Motivo</label>
                        <input type="text" id="editRepoConteudo" class="w-full bg-[#1a1a1a] border border-[#444] rounded p-2 text-white outline-none focus:border-[#00FFFF]">
                    </div>

                    <div class="flex items-center justify-between pt-4 border-t border-[#333] mt-4 gap-3">
                        
                        <button type="button" id="btnExcluirRepo" onclick="deletarReposicao()" class="hidden bg-red-900/20 text-red-500 border border-red-900/50 p-2.5 rounded hover:bg-red-900/40 transition" title="Excluir Reposi√ß√£o">
                            <i class="fas fa-trash-alt"></i>
                        </button>

                        <div class="flex gap-3 flex-1 justify-end">
                            <button type="button" onclick="document.getElementById('modalEditarRepo').style.display='none'" class="bg-[#333] text-white px-4 py-2 rounded font-bold hover:bg-[#444] transition">
                                CANCELAR
                            </button>
                            <button type="submit" id="btnSalvarRepo" class="bg-[#00FFFF] text-black px-6 py-2 rounded font-bold hover:bg-[#00cccc] transition shadow-[0_0_10px_rgba(0,255,255,0.2)]">
                                SALVAR
                            </button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <!-- Removed inline modalNovoColaborador in favor of the universal modal. -->
    <!-- The buttons on this page call abrirModalNovoColaborador(), which is defined in js/script-funcionario.js and uses the universal modal (#modalUniversal). -->
    <script src="js/script-funcionario.js"></script>
</body>
</html>